<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QQQ/JEPI æœˆä¾›æ¯”ä¾‹è©•ä¼°è¨ˆç®—å™¨ (K$)</title>
    <style>
        /* (CSS æ¨£å¼ä¿æŒä¸è®Šï¼Œç¢ºä¿å¤–è§€ä¸€è‡´) */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: #f0f2f5;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            color: #333;
        }
        .container {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.08);
            width: 100%;
            max-width: 500px;
        }
        h2 {
            text-align: center;
            color: #1a202c;
            margin-bottom: 20px;
            font-size: 1.5rem;
        }
        .input-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-size: 0.95rem;
            font-weight: 600;
        }
        input[type="number"] {
            width: 100%;
            padding: 10px;
            border: 1px solid #cbd5e0;
            border-radius: 6px;
            font-size: 1rem;
            box-sizing: border-box;
        }
        button {
            width: 100%;
            padding: 14px;
            background-color: #3182ce;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.3s;
            margin-top: 10px;
        }
        button:hover {
            background-color: #2b6cb0;
        }
        
        /* çµæœå€åŸŸ */
        .result-panel {
            margin-top: 25px;
            display: none;
            animation: fadeIn 0.5s;
        }
        .summary-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 15px;
        }
        .summary-table th, .summary-table td {
            text-align: left;
            padding: 8px;
            border-bottom: 1px solid #e2e8f0;
            font-size: 0.95rem;
        }
        .summary-table th {
            background-color: #edf2f7;
            color: #4a5568;
        }
        .highlight {
            font-weight: bold;
            color: #2d3748;
        }
        .status-box {
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
        }
        .status-ok {
            background-color: #c6f6d5;
            color: #22543d;
            border: 1px solid #9ae6b4;
        }
        .status-warn {
            background-color: #fed7d7;
            color: #742a2a;
            border: 1px solid #feb2b2;
        }
        .action-steps, .dca-advice {
            background-color: #ebf8ff;
            border-left: 4px solid #4299e1;
            padding: 15px;
            margin-top: 15px;
            font-size: 0.95rem;
        }
        .note {
            font-size: 0.8rem;
            color: #718096;
            margin-top: 10px;
            text-align: center;
        }
        .dca-advice {
             border-left: 4px solid #f6ad55; /* æ©™è‰²é‚Šæ¡†ä»¥å€åˆ† */
             background-color: #fffaf0;
        }
    </style>
</head>
<body>

<div class="container">
    <h2>ğŸ¯ æœˆä¾›æ¯”ä¾‹è©•ä¼° (K$)</h2>
    
    <div class="input-group">
        <label for="qqqVal">QQQ ç•¶å‰å¸‚å€¼ (K$)</label>
        <input type="number" id="qqqVal" placeholder="ä¾‹å¦‚: 8.50">
    </div>

    <div class="input-group">
        <label for="jepiVal">JEPI ç•¶å‰å¸‚å€¼ (K$)</label>
        <input type="number" id="jepiVal" placeholder="ä¾‹å¦‚: 1.50">
    </div>
    
    <hr style="margin: 20px 0;">
    
    <div class="input-group">
        <label for="dcaAmount">ğŸ“ˆ æ¯æœˆä¾›æ¬¾é‡‘é¡ (K$)</label>
        <input type="number" id="dcaAmount" placeholder="ä¾‹å¦‚: 0.50 (å³ $500)">
    </div>

    <button onclick="calculate()">è¨ˆç®—æ¯”ä¾‹èˆ‡æœˆä¾›å»ºè­°</button>

    <div id="resultPanel" class="result-panel">
        
        <table class="summary-table">
            <thead>
                <tr>
                    <th>è³‡ç”¢</th>
                    <th>ç›®å‰å¸‚å€¼ (K$)</th>
                    <th>ç›®å‰æ¯”ä¾‹</th>
                    <th>ç›®æ¨™</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>QQQ</td>
                    <td id="resQQQVal" class="highlight">-</td>
                    <td id="resQQQPct">-</td>
                    <td>80% (å®¹å¿ 75%-85%)</td>
                </tr>
                <tr>
                    <td>JEPI</td>
                    <td id="resJEPIVal" class="highlight">-</td>
                    <td id="resJEPIPct">-</td>
                    <td>20% (å®¹å¿ 15%-25%)</td>
                </tr>
                <tr>
                    <td><strong>ç¸½è³‡ç”¢</strong></td>
                    <td id="resTotal" class="highlight" colspan="3">-</td>
                </tr>
            </tbody>
        </table>

        <div id="statusBox" class="status-box"></div>
        
        <div id="dcaAdvice" class="dca-advice"></div>

        <div id="actionSteps" class="action-steps" style="display:none;"></div>
    </div>
    
    <div class="note">æ‰€æœ‰é‡‘é¡ä»¥ K$ (åƒç¾å…ƒ) è¨ˆç®—ã€‚</div>
</div>

<script>
    function calculate() {
        // 1. ç²å–è¼¸å…¥
        const qqqVal = parseFloat(document.getElementById('qqqVal').value) || 0;
        const jepiVal = parseFloat(document.getElementById('jepiVal').value) || 0;
        const dcaAmount = parseFloat(document.getElementById('dcaAmount').value) || 0;
        
        const totalVal = qqqVal + jepiVal;

        if (totalVal <= 0) {
            alert("ç¸½è³‡ç”¢å¿…é ˆå¤§æ–¼ 0 æ‰èƒ½è¨ˆç®—æ¯”ä¾‹");
            return;
        }

        // 2. è¨ˆç®—æ¯”ä¾‹
        const qqqPct = (qqqVal / totalVal) * 100;
        const jepiPct = (jepiVal / totalVal) * 100;
        
        // 3. æ›´æ–°è¡¨æ ¼é¡¯ç¤º
        document.getElementById('resQQQVal').innerText = `K$${qqqVal.toFixed(2)}`;
        document.getElementById('resQQQPct').innerText = `${qqqPct.toFixed(2)}%`;
        document.getElementById('resJEPIVal').innerText = `K$${jepiVal.toFixed(2)}`;
        document.getElementById('resJEPIPct').innerText = `${jepiPct.toFixed(2)}%`;
        document.getElementById('resTotal').innerText = `K$${totalVal.toFixed(2)}`;

        // 4. é¡¯ç¤ºé¢æ¿
        document.getElementById('resultPanel').style.display = "block";

        // 5. åˆ¤æ–·é‚è¼¯ (Trigger Point: 75% - 85%)
        const statusBox = document.getElementById('statusBox');
        const actionSteps = document.getElementById('actionSteps');
        const dcaAdvice = document.getElementById('dcaAdvice');
        
        let needsRebalance = false;
        let message = "";
        
        // --- æª¢æŸ¥å€‰ä½ç‹€æ³ ---
        if (qqqPct > 85) {
            needsRebalance = true;
            message = "âš ï¸ QQQ ä½”æ¯”éé«˜ (>85%)ï¼Œå·²é”åˆ°è§¸ç™¼é»ã€‚";
            statusBox.className = "status-box status-warn";
        } else if (qqqPct < 75) {
            needsRebalance = true;
            message = "âš ï¸ QQQ ä½”æ¯”éä½ (<75%)ï¼Œå·²é”åˆ°è§¸ç™¼é»ã€‚";
            statusBox.className = "status-box status-warn";
        } else {
            message = "âœ… æŠ•è³‡çµ„åˆæ¯”ä¾‹å¥åº·ï¼Œç„¡éœ€èª¿æ•´ç¾æœ‰å€‰ä½ã€‚";
            statusBox.className = "status-box status-ok";
        }
        
        statusBox.innerText = message;

        // --- 6. å‚³çµ±å†å¹³è¡¡å»ºè­° (ç¾æœ‰å€‰ä½) ---
        if (needsRebalance) {
            actionSteps.style.display = "block";
            
            const targetQQQ = totalVal * 0.80;
            const diffQQQ = targetQQQ - qqqVal; 
            const diffJEPI = -diffQQQ;
            
            const qqqAct = diffQQQ > 0 ? `<span style="color:green">è²·å…¥ K$${Math.abs(diffQQQ).toFixed(2)}</span>` : `<span style="color:red">è³£å‡º K$${Math.abs(diffQQQ).toFixed(2)}</span>`;
            const jepiAct = diffJEPI > 0 ? `<span style="color:green">è²·å…¥ K$${Math.abs(diffJEPI).toFixed(2)}</span>` : `<span style="color:red">è³£å‡º K$${Math.abs(diffJEPI).toFixed(2)}</span>`;

            actionSteps.innerHTML = `
                <strong>ğŸ› ï¸ å‚³çµ±å†å¹³è¡¡å»ºè­° (å€‰ä½èª¿æ•´)ï¼š</strong><br>
                å¦‚æœæ‚¨æ±ºå®šç«‹å³èª¿æ•´ç¾æœ‰å€‰ä½ï¼Œéœ€è¦åŸ·è¡Œä»¥ä¸‹æ“ä½œï¼š<br>
                1. QQQ: ${qqqAct}<br>
                2. JEPI: ${jepiAct}
            `;
        } else {
            actionSteps.style.display = "none";
        }

        // --- 7. æœˆä¾›åˆ†é…å»ºè­° (DCA Rebalancing) ---
        let dcaMsg = "";

        if (dcaAmount > 0) {
            if (needsRebalance) {
                // å¦‚æœå·²ç¶“è§¸ç™¼å†å¹³è¡¡ï¼Œæœˆä¾›æ‡‰å…¨åŠ›æŠ•å…¥ä¸è¶³çš„è³‡ç”¢
                if (qqqPct > 85) { // QQQ éé‡ï¼Œæœˆä¾›å…¨åŠ›è²· JEPI
                    dcaMsg = `
                        <strong>ğŸ”¥ æœˆä¾›å»ºè­° (ä¿®æ­£æ¨¡å¼)ï¼š</strong><br>
                        ç”±æ–¼ QQQ åš´é‡è¶…é‡ï¼Œå»ºè­°å°‡ **100%** (${dcaAmount.toFixed(2)} K$) çš„æœˆä¾›å…¨éƒ¨æŠ•å…¥ï¼š
                        <br>â¡ï¸ **JEPI**
                        <br><small>ç›´è‡³æ•´é«”çµ„åˆæ¯”ä¾‹å›åˆ° 80/20 ç¯„åœç‚ºæ­¢ã€‚</small>
                    `;
                } else if (qqqPct < 75) { // QQQ éè¼•ï¼Œæœˆä¾›å…¨åŠ›è²· QQQ
                     dcaMsg = `
                        <strong>ğŸ”¥ æœˆä¾›å»ºè­° (ä¿®æ­£æ¨¡å¼)ï¼š</strong><br>
                        ç”±æ–¼ QQQ åš´é‡ä¸è¶³ï¼Œå»ºè­°å°‡ **100%** (${dcaAmount.toFixed(2)} K$) çš„æœˆä¾›å…¨éƒ¨æŠ•å…¥ï¼š
                        <br>â¡ï¸ **QQQ**
                        <br><small>ç›´è‡³æ•´é«”çµ„åˆæ¯”ä¾‹å›åˆ° 80/20 ç¯„åœç‚ºæ­¢ã€‚</small>
                    `;
                }
            } else {
                // æ¯”ä¾‹å¥åº·ï¼Œæœˆä¾›æŒ‰ç›®æ¨™æ¯”ä¾‹åˆ†é… (80/20)
                const dcaQQQ = dcaAmount * 0.8;
                const dcaJEPI = dcaAmount * 0.2;
                dcaMsg = `
                    <strong>ğŸ‘ æœˆä¾›å»ºè­° (æ­£å¸¸æ¨¡å¼)ï¼š</strong><br>
                    ç›®å‰çš„å€‰ä½æ¯”ä¾‹å¥åº·ï¼Œå»ºè­°æœˆä¾›æŒ‰ç›®æ¨™æ¯”ä¾‹åˆ†é…ï¼š
                    <br>â¡ï¸ QQQ 80% (K$${dcaQQQ.toFixed(2)})
                    <br>â¡ï¸ JEPI 20% (K$${dcaJEPI.toFixed(2)})
                `;
            }
        } else {
            dcaMsg = "è«‹è¼¸å…¥ã€Œæ¯æœˆä¾›æ¬¾é‡‘é¡ (K$)ã€ä»¥ç²å–æœˆä¾›åˆ†é…å»ºè­°ã€‚";
        }

        dcaAdvice.innerHTML = dcaMsg;
    }
</script>

</body>
</html>